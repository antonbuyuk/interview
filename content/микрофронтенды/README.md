## Микрофронтенды

### 1. Что такое микрофронтенды?
**Ответ:** Архитектурный подход, при котором фронтенд-приложение разбивается на независимые, автономные приложения (микрофронтенды), которые могут разрабатываться, тестироваться и развертываться отдельно.

**Ответ Senior:**

**Ключевые принципы:**
- Независимость команд и технологий
- Автономность развертывания
- Изоляция кода и стилей
- Единый пользовательский интерфейс

### 2. Преимущества и недостатки микрофронтендов?
**Ответ Senior:**

**Преимущества:**
- Независимая разработка и развертывание
- Масштабируемость команд
- Технологическая гибкость (разные фреймворки)
- Изоляция ошибок (падение одного микрофронтенда не ломает все приложение)
- Переиспользование кода между командами

**Недостатки:**
- Увеличенная сложность архитектуры
- Дублирование зависимостей
- Проблемы с версионированием общих библиотек
- Сложность отладки и мониторинга
- Увеличенный размер бандла
- Проблемы с SEO (для некоторых подходов)

### 3. Основные подходы к реализации микрофронтендов?
**Ответ Senior:**

**1. Module Federation (Webpack 5)**
- Обмен модулями между приложениями во время выполнения
- Динамическая загрузка удаленных модулей
- Поддержка разных версий зависимостей

**2. Single-SPA**
- Мета-фреймворк для объединения нескольких SPA
- Роутинг на уровне приложения
- Поддержка разных фреймворков

**3. qiankun (Alibaba)**
- Решение на основе Single-SPA
- Изоляция стилей через Shadow DOM
- Простота интеграции

**4. iframe**
- Простая изоляция через iframe
- Проблемы с производительностью и UX
- Сложности с коммуникацией

**5. Web Components**
- Нативные веб-стандарты
- Полная изоляция стилей и логики
- Хорошая поддержка браузерами

### 4. Что такое Module Federation?
**Ответ:** Module Federation — это функция Webpack 5, которая позволяет одному приложению динамически загружать и использовать модули из другого приложения во время выполнения без сборки. Это решает проблему интеграции микрофронтендов, позволяя им обмениваться компонентами, утилитами и другими модулями. Host приложение определяет, какие модули оно экспортирует, а Remote приложения могут потреблять эти модули, создавая слабо связанную архитектуру.

**Ответ Senior:**

**Концепции:**
- **Host** — основное приложение, которое загружает удаленные модули
- **Remote** — приложение, которое предоставляет модули
- **Shared** — общие зависимости между приложениями

```javascript
// webpack.config.js (Host)
module.exports = {
  plugins: [
    new ModuleFederationPlugin({
      name: 'host',
      remotes: {
        remoteApp: 'remote@http://localhost:3001/remoteEntry.js',
      },
      shared: {
        react: { singleton: true },
        'react-dom': { singleton: true },
      },
    }),
  ],
};

// Использование в коде
const RemoteComponent = React.lazy(() => import('remoteApp/Component'));
```

### 5. Как организовать коммуникацию между микрофронтендами?
**Ответ Senior:**

**1. Custom Events**
```javascript
// Отправка события
window.dispatchEvent(new CustomEvent('user-updated', {
  detail: { userId: 123 }
}));

// Подписка на событие
window.addEventListener('user-updated', (event) => {
  console.log(event.detail);
});
```

**2. Shared State (Redux, Zustand)**
- Общее хранилище состояния
- Паттерн Event Bus

**3. URL/Query Parameters**
- Передача данных через URL
- Простой способ для передачи простых данных

**4. PostMessage API (для iframe)**
```javascript
// Отправка сообщения
window.parent.postMessage({ type: 'UPDATE', data: {} }, '*');

// Получение сообщения
window.addEventListener('message', (event) => {
  if (event.data.type === 'UPDATE') {
    // обработка
  }
});
```

**5. Props через Module Federation**
- Передача данных через пропсы компонентов

### 6. Проблемы с микрофронтендами и их решения?
**Ответ Senior:**

**1. Изоляция стилей**
- **Проблема:** Конфликты CSS между микрофронтендами
- **Решения:** CSS Modules, Shadow DOM, BEM, префиксы классов

**2. Версионирование зависимостей**
- **Проблема:** Разные версии одной библиотеки
- **Решения:** Shared dependencies в Module Federation, семантическое версионирование

**3. Производительность**
- **Проблема:** Увеличенный размер бандла, дублирование кода
- **Решения:** Code splitting, lazy loading, shared dependencies

**4. Роутинг**
- **Проблема:** Координация маршрутов между приложениями
- **Решения:** Единый роутер, hash-based routing, history API

**5. Тестирование**
- **Проблема:** Сложность интеграционного тестирования
- **Решения:** Contract testing, E2E тесты, изолированное тестирование

**6. Мониторинг и отладка**
- **Проблема:** Отслеживание ошибок в разных приложениях
- **Решения:** Единая система логирования, distributed tracing, error boundaries

---

